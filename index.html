<!DOCTYPE html>
<html lang="km">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Reaksa Ads - Fully Responsive</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Battambang:wght@300;400;700&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <style>
        :root {
            --sidebar-bg: #111827;
            --primary: #2563eb;
            --bg-body: #f3f4f6;
            --text-dark: #1f2937;
            --text-light: #6b7280;
            --border: #e5e7eb;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Poppins', 'Battambang', sans-serif; -webkit-tap-highlight-color: transparent; }
        
        body { display: flex; height: 100vh; background-color: var(--bg-body); color: var(--text-dark); overflow: hidden; flex-direction: row; }

        /* --- MOBILE HEADER (Visible on Mobile Only) --- */
        .mobile-header {
            display: none; /* Hidden on Desktop */
            background: var(--sidebar-bg);
            padding: 15px 20px;
            align-items: center;
            justify-content: space-between;
            color: white;
            width: 100%;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 2000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .mobile-brand { font-size: 18px; font-weight: 700; }
        .menu-toggle { font-size: 24px; cursor: pointer; }

        /* --- SIDEBAR --- */
        .sidebar { 
            width: 280px; 
            background-color: var(--sidebar-bg); 
            color: white; 
            display: flex; 
            flex-direction: column; 
            padding: 25px 20px; 
            flex-shrink: 0; 
            height: 100vh;
            transition: transform 0.3s ease;
            z-index: 2001;
        }
        .brand { font-size: 18px; font-weight: 700; margin-bottom: 40px; display: flex; flex-direction: column; gap: 5px; }
        .brand-main { color: white; letter-spacing: 0.5px; }
        .brand-sub { font-size: 11px; color: #9ca3af; font-weight: 400; letter-spacing: 1px; text-transform: uppercase; }
        
        .menu-item { padding: 12px 15px; border-radius: 8px; cursor: pointer; color: #9ca3af; margin-bottom: 5px; display: flex; align-items: center; gap: 12px; font-size: 14px; transition: 0.2s; }
        .menu-item:hover { background: rgba(255,255,255,0.1); color: white; }
        .menu-item.active { background: rgba(255,255,255,0.1); color: white; font-weight: 600; border-left: 4px solid var(--primary); }

        /* OVERLAY (For Mobile Menu) */
        .overlay {
            display: none;
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5); z-index: 2000;
        }

        /* --- MAIN CONTENT --- */
        .main { flex: 1; padding: 30px; overflow-y: auto; height: 100vh; position: relative; }
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }
        .page-title { font-size: 20px; font-weight: 700; color: var(--text-dark); }

        /* VIEWS */
        .view-section { display: none; animation: fadeIn 0.3s ease; }
        .view-section.active-view { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* STATS CARDS */
        .stats-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 30px; }
        .card { background: white; border-radius: 16px; padding: 25px; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05); display: flex; justify-content: space-between; align-items: center; border: 1px solid var(--border); }
        .card-label { font-size: 12px; font-weight: 700; color: var(--text-light); text-transform: uppercase; margin-bottom: 5px; }
        .card-value { font-size: 28px; font-weight: 700; }
        .card-icon { width: 48px; height: 48px; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 20px; flex-shrink: 0; }
        
        .val-blue { color: var(--primary); } .bg-blue { background: #eff6ff; color: var(--primary); }
        .val-green { color: #10b981; } .bg-green { background: #ecfdf5; color: #10b981; }
        .val-red { color: #ef4444; } .bg-red { background: #fef2f2; color: #ef4444; }

        /* FORMS & TABLES */
        .white-box { background: white; border-radius: 16px; padding: 30px; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05); border: 1px solid var(--border); margin-bottom: 20px; }
        .form-row { display: grid; grid-template-columns: 2fr 1fr 1fr; gap: 20px; margin-bottom: 20px; }
        .form-control { width: 100%; padding: 12px 16px; border: 1px solid var(--border); border-radius: 8px; background: #f9fafb; outline: none; font-size: 14px; }
        .form-control:focus { background: white; border-color: var(--primary); }

        /* Responsive Table Wrapper */
        .table-responsive { width: 100%; overflow-x: auto; -webkit-overflow-scrolling: touch; margin-bottom: 15px; }
        
        .item-table { width: 100%; border-collapse: collapse; min-width: 600px; /* Force scroll on small screens */ }
        .item-table th { text-align: left; padding: 10px; background: #f9fafb; color: #6b7280; font-size: 12px; border-bottom: 1px solid var(--border); }
        .item-table td { padding: 10px; border-bottom: 1px solid var(--border); }
        
        .btn-save { background: var(--primary); color: white; padding: 12px 30px; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; white-space: nowrap; }
        .btn-add { background: #eff6ff; color: var(--primary); border: none; padding: 8px 15px; border-radius: 6px; font-weight: 600; cursor: pointer; }
        .btn-send { background: #10b981; color: white; padding: 6px 12px; border-radius: 6px; font-size: 12px; border:none; cursor:pointer; display:flex; align-items:center; gap:5px; white-space: nowrap; }
        
        table.main-table { width: 100%; border-collapse: collapse; min-width: 800px; /* Force scroll */ }
        table.main-table th { text-align: left; padding: 15px; background: #f9fafb; font-size: 12px; font-weight: 600; color: var(--text-light); text-transform: uppercase; border-bottom: 1px solid var(--border); }
        table.main-table td { padding: 15px; border-bottom: 1px solid var(--border); font-size: 14px; color: var(--text-dark); }
        .status-badge { padding: 4px 10px; border-radius: 20px; font-size: 11px; font-weight: 700; }
        .st-paid { background: #dcfce7; color: #15803d; } .st-pending { background: #fee2e2; color: #991b1b; }
        .action-btn { color: #ef4444; cursor: pointer; margin-left: 10px; }

        /* --- RESPONSIVE CSS --- */
        @media (max-width: 992px) {
            .stats-grid { grid-template-columns: repeat(2, 1fr); }
            .form-row { grid-template-columns: 1fr 1fr; }
        }

        @media (max-width: 768px) {
            /* General Layout */
            body { flex-direction: column; }
            .mobile-header { display: flex; }
            
            /* Sidebar Drawer */
            .sidebar { 
                position: fixed; top: 0; left: -280px; height: 100%; 
                box-shadow: 2px 0 10px rgba(0,0,0,0.1); 
            }
            .sidebar.active { left: 0; }
            .overlay.active { display: block; }

            /* Content Adjustment */
            .main { padding: 15px; padding-top: 80px; /* Space for header */ }
            
            /* Stats Stack */
            .stats-grid { grid-template-columns: 1fr; }
            
            /* Form Stack */
            .form-row { grid-template-columns: 1fr; gap: 15px; }
            .white-box { padding: 20px; }
            
            /* Footer Action Stack */
            .footer-action { flex-direction: column; align-items: stretch !important; gap: 15px; }
            .total-group { justify-content: space-between; width: 100%; }
            .btn-save { width: 100%; }
        }

        /* INVOICE TEMPLATE (HIDDEN) */
        #invoice-capture { position: fixed; top: -10000px; width: 800px; background: white; padding: 50px; font-family: 'Poppins', sans-serif; color: #111827; }
        .inv-head { display: flex; justify-content: space-between; margin-bottom: 40px; }
        .inv-logo h1 { font-size: 26px; font-weight: 800; margin: 0; color: #111827; }
        .inv-logo p { font-size: 10px; letter-spacing: 2px; color: #6b7280; text-transform: uppercase; margin-top: 5px; }
        .inv-meta div { text-align: right; margin-bottom: 5px; font-size: 14px; }
        .inv-meta span { font-weight: 600; color: #9ca3af; font-size: 11px; text-transform: uppercase; margin-right: 15px; }
        
        .inv-table { width: 100%; margin-bottom: 30px; border-collapse: collapse; }
        .inv-table th { background: #f3f4f6; padding: 10px; font-size: 11px; text-transform: uppercase; color: #6b7280; text-align: left; }
        .inv-table td { padding: 15px 10px; border-bottom: 1px solid #e5e7eb; font-size: 14px; }
        .inv-summary { display: flex; justify-content: flex-end; }
        .inv-total-row { display: flex; justify-content: space-between; width: 250px; margin-bottom: 5px; font-size: 14px; }
        .inv-grand { font-size: 18px; font-weight: 800; margin-top: 10px; padding-top: 10px; border-top: 2px solid #e5e7eb; }

        .inv-footer-area { margin-top: 40px; border-top: 1px solid #e5e7eb; padding-top: 20px; display: flex; justify-content: space-between; align-items: flex-start; }
        .qr-section { display: flex; align-items: center; gap: 20px; }
        .qr-img { width: 90px; height: 90px; border-radius: 8px; border: 1px solid #e5e7eb; object-fit: contain; }
        .contact-section { text-align: right; }
        .contact-row { display: flex; align-items: center; justify-content: flex-end; gap: 8px; margin-bottom: 6px; font-size: 13px; color: #374151; }
        .contact-icon { color: #2563eb; font-size: 14px; }
    </style>
</head>
<body>

    <div class="mobile-header">
        <div class="mobile-brand">Reaksa Ads</div>
        <div class="menu-toggle" onclick="toggleSidebar()"><i class="fas fa-bars"></i></div>
    </div>

    <div class="overlay" id="overlay" onclick="toggleSidebar()"></div>

    <nav class="sidebar" id="sidebar">
        <div class="brand">
            <div class="brand-main"><i class="fab fa-slack"></i> Reaksa Ads</div>
            <div class="brand-sub">intelligent solutions</div>
        </div>
        <div class="menu-item active" id="nav-dash" onclick="switchTab('dash'); toggleSidebar()"><i class="fas fa-th-large"></i> Dashboard</div>
        <div class="menu-item" id="nav-inv" onclick="switchTab('inv'); toggleSidebar()"><i class="fas fa-file-invoice"></i> Invoices</div>
        <div class="menu-item" id="nav-cli" onclick="switchTab('cli'); toggleSidebar()"><i class="fas fa-users"></i> Clients</div>
        <div class="menu-item" id="nav-set" onclick="switchTab('set'); toggleSidebar()"><i class="fas fa-cog"></i> Settings</div>
    </nav>

    <main class="main">
        <div id="view-dash" class="view-section active-view">
            <div class="header">
                <div class="page-title">Dashboard</div>
            </div>

            <div class="stats-grid">
                <div class="card"><div><div class="card-label">Total Revenue</div><div class="card-value val-blue" id="statRevenue">$0.00</div></div><div class="card-icon bg-blue"><i class="fas fa-wallet"></i></div></div>
                <div class="card"><div><div class="card-label">Total Paid</div><div class="card-value val-green" id="statPaid">$0.00</div></div><div class="card-icon bg-green"><i class="fas fa-check-circle"></i></div></div>
                <div class="card"><div><div class="card-label">Pending</div><div class="card-value val-red" id="statPending">$0.00</div></div><div class="card-icon bg-red"><i class="fas fa-exclamation-circle"></i></div></div>
            </div>

            <div class="white-box">
                <h3 style="margin-bottom:20px;">New Invoice</h3>
                <div class="form-row">
                    <input type="text" id="inpClient" class="form-control" placeholder="Client Name" list="clientList">
                    <datalist id="clientList"></datalist>
                    <input type="text" id="inpInvNum" class="form-control" placeholder="Invoice #">
                    <input type="date" id="inpDate" class="form-control">
                </div>
                
                <div class="table-responsive">
                    <table class="item-table"><thead><tr><th style="width:50%;">Description</th><th style="width:15%;">Qty</th><th style="width:20%;">Price ($)</th><th style="width:10%;"></th></tr></thead><tbody id="itemContainer"></tbody></table>
                </div>
                
                <button onclick="addRow()" class="btn-add">+ Add Item</button>
                
                <div class="footer-action" style="margin-top:20px; display:flex; justify-content:space-between; align-items:center; border-top:1px solid var(--border); padding-top:20px;">
                    <div class="total-group" style="display:flex; gap:10px; align-items:center;">
                        <select id="inpStatus" class="form-control" style="width:150px;"><option value="Pending">ðŸ”´ Pending</option><option value="Paid">ðŸŸ¢ Paid</option></select>
                        <div style="font-size:18px; font-weight:700;">Total: <span id="displayTotal">$0.00</span></div>
                    </div>
                    <button onclick="saveInvoice()" class="btn-save" id="btnSave">Save Invoice</button>
                </div>
            </div>
        </div>

        <div id="view-inv" class="view-section">
            <div class="header"><div class="page-title">Invoices History</div></div>
            <div class="white-box" style="padding:0; overflow:hidden;">
                <div class="table-responsive">
                    <table class="main-table"><thead><tr><th>Invoice</th><th>Client</th><th>Date</th><th>Total</th><th>Status</th><th>Action</th></tr></thead><tbody id="invoiceTable"></tbody></table>
                </div>
            </div>
        </div>

        <div id="view-cli" class="view-section">
            <div class="header"><div class="page-title">Clients</div></div>
            <div class="white-box">
                <div class="form-row" style="margin-bottom:0;"><input type="text" id="cliName" class="form-control" placeholder="Name"><input type="text" id="cliPhone" class="form-control" placeholder="Phone"><button onclick="saveClient()" class="btn-save">Add</button></div>
            </div>
            <div class="white-box" style="padding:0; overflow:hidden;">
                <div class="table-responsive">
                    <table class="main-table"><thead><tr><th>Name</th><th>Phone</th><th>Action</th></tr></thead><tbody id="clientTable"></tbody></table>
                </div>
            </div>
        </div>

        <div id="view-set" class="view-section">
            <div class="header"><div class="page-title">Settings</div></div>
            <div class="white-box">
                <div style="display:flex; justify-content:space-between; align-items:center;">
                    <div><b>Reset System</b><div style="font-size:12px; color:#6b7280;">Delete all data and start over.</div></div>
                    <button onclick="if(confirm('Delete all data?')) { localStorage.clear(); location.reload(); }" style="background:#ef4444; color:white; padding:8px 15px; border:none; border-radius:6px; cursor:pointer;">Reset</button>
                </div>
            </div>
        </div>
    </main>

    <div id="invoice-capture">
        <div class="inv-head">
            <div class="inv-logo"><h1>Reaksa Ads</h1><p>INTELLIGENT SOLUTIONS</p></div>
            <div class="inv-meta">
                <div><span>INVOICE NO</span> <b id="outNum"></b></div>
                <div><span>DATE</span> <b id="outDate"></b></div>
            </div>
        </div>
        <div style="border-bottom:2px solid #111827; margin-bottom:30px;"></div>
        <div style="display:flex; justify-content:space-between; margin-bottom:30px;">
            <div><div style="font-size:10px; font-weight:700; color:#9ca3af;">BILL TO</div><div style="font-size:18px; font-weight:700;" id="outClient"></div></div>
            <div style="text-align:right;"><div style="font-size:10px; font-weight:700; color:#9ca3af;">PAYMENT DUE</div><div style="font-size:16px; font-weight:700; color:#ef4444;" id="outDue"></div></div>
        </div>
        <table class="inv-table"><thead><tr><th>Description</th><th style="text-align:center;">Qty</th><th style="text-align:right;">Price</th><th style="text-align:right;">Total</th></tr></thead><tbody id="outItems"></tbody></table>
        <div class="inv-summary"><div style="width:250px;">
            <div class="inv-total-row"><span>Subtotal</span><span id="outSub">$0.00</span></div>
            <div class="inv-total-row"><span>Tax (0%)</span><span>$0.00</span></div>
            <div class="inv-total-row inv-grand"><span>TOTAL</span><span id="outTotal">$0.00</span></div>
        </div></div>
        
        <div class="inv-footer-area">
            <div class="qr-section">
                <img src="https://i.postimg.cc/NM5461RZ/aba_qr.jpg" alt="ABA QR" class="qr-img" crossorigin="anonymous">
                <div>
                    <div style="font-size:10px; font-weight:700; color:#9ca3af; margin-bottom:5px;">PAYMENT INFO</div>
                    <div style="font-weight:700; color:#111827;">ABA: 002 060 042</div>
                    <div style="font-size:12px; color:#6b7280;">Reaksa Ads</div>
                </div>
            </div>
            <div class="contact-section">
                <div style="font-size:10px; font-weight:700; color:#9ca3af; margin-bottom:8px;">CONTACT US</div>
                <div class="contact-row"><i class="fas fa-phone-alt contact-icon"></i> <b>015 812 050 | 068 566 402</b></div>
                <div class="contact-row"><i class="fab fa-telegram-plane contact-icon"></i> <b style="color:#2563eb;">t.me/ReaksaAds</b></div>
            </div>
        </div>
    </div>

    <script>
        const BOT_TOKEN = "8269889459:AAFCHuvYXeEVzcK7bsWqxPvFgQp8yMwGVAQ"; 
        const CHAT_ID = "6459933568"; 

        let invoices = JSON.parse(localStorage.getItem('agDataV36')) || [];
        let clients = JSON.parse(localStorage.getItem('agCliV36')) || [];

        window.onload = function() {
            document.getElementById('inpDate').value = new Date().toISOString().split('T')[0];
            genInvNum();
            renderTable();
            renderClients();
            renderAgency();
            addRow();
        };

        // --- RESPONSIVE MENU ---
        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('active');
            document.getElementById('overlay').classList.toggle('active'); // Toggle Overlay
        }

        function switchTab(tabId) {
            document.querySelectorAll('.menu-item').forEach(el => el.classList.remove('active'));
            document.getElementById('nav-'+tabId).classList.add('active');
            document.querySelectorAll('.view-section').forEach(el => el.classList.remove('active-view'));
            document.getElementById('view-'+tabId).classList.add('active-view');
        }

        function addRow() {
            const tr = document.createElement('tr');
            tr.innerHTML = `<td><input type="text" class="form-control i-desc" placeholder="Service Name"></td><td><input type="number" class="form-control i-qty" value="1" oninput="calcTotal()"></td><td><input type="number" class="form-control i-price" placeholder="0.00" oninput="calcTotal()"></td><td style="text-align:center;"><i class="fas fa-trash action-btn" onclick="this.closest('tr').remove(); calcTotal();"></i></td>`;
            document.getElementById('itemContainer').appendChild(tr);
        }

        function calcTotal() {
            let total = 0;
            document.querySelectorAll('#itemContainer tr').forEach(row => {
                const qty = parseFloat(row.querySelector('.i-qty').value) || 0;
                const price = parseFloat(row.querySelector('.i-price').value) || 0;
                total += qty * price;
            });
            document.getElementById('displayTotal').innerText = "$" + total.toFixed(2);
            return total;
        }

        function genInvNum() { 
            const inp = document.getElementById('inpInvNum');
            if(!inp.value) inp.value = "INV-" + (invoices.length + 1).toString().padStart(3, '0'); 
        }

        function saveInvoice() {
            const client = document.getElementById('inpClient').value;
            if(!client) return alert("Please enter Client Name");
            const items = [];
            document.querySelectorAll('#itemContainer tr').forEach(row => {
                const desc = row.querySelector('.i-desc').value;
                const qty = parseFloat(row.querySelector('.i-qty').value) || 0;
                const price = parseFloat(row.querySelector('.i-price').value) || 0;
                if(desc) items.push({desc, qty, price, total: qty*price});
            });
            if(items.length===0) return alert("Add items");

            const total = calcTotal();
            const invNum = document.getElementById('inpInvNum').value;
            const inv = { 
                id: Date.now(), 
                num: invNum, 
                client, items, total, 
                status: document.getElementById('inpStatus').value, 
                date: document.getElementById('inpDate').value 
            };
            
            invoices.unshift(inv);
            localStorage.setItem('agDataV36', JSON.stringify(invoices));
            
            alert("âœ… Saved! Go to 'Invoices' to send.");
            renderAgency();
            renderTable();
            
            document.getElementById('inpClient').value = "";
            document.getElementById('itemContainer').innerHTML = "";
            document.getElementById('inpInvNum').value = "";
            addRow();
            genInvNum();
            calcTotal();
        }

        function renderAgency() {
            let rev=0, paid=0, pend=0;
            invoices.forEach(i => {
                rev += i.total;
                if(i.status==='Paid') paid+=i.total; else pend+=i.total;
            });
            document.getElementById('statRevenue').innerText = "$"+rev.toFixed(2);
            document.getElementById('statPaid').innerText = "$"+paid.toFixed(2);
            document.getElementById('statPending').innerText = "$"+pend.toFixed(2);
        }

        function renderTable() {
            const tb = document.getElementById('invoiceTable'); tb.innerHTML = "";
            invoices.forEach(i => {
                let badge = i.status==='Paid' ? 'st-paid' : 'st-pending';
                tb.innerHTML += `
                    <tr>
                        <td style="color:var(--primary); font-weight:700;">${i.num}</td>
                        <td>${i.client}</td>
                        <td>${i.date}</td>
                        <td style="font-weight:700;">$${i.total.toFixed(2)}</td>
                        <td><span class="status-badge ${badge}">${i.status}</span></td>
                        <td style="display:flex; align-items:center;">
                            <button class="btn-send" onclick='prepSend(${JSON.stringify(i)})'><i class="fab fa-telegram-plane"></i> Send</button>
                            <i class="fas fa-trash action-btn" onclick="delInv(${i.id})"></i>
                        </td>
                    </tr>`;
            });
        }

        function delInv(id) { if(confirm("Delete?")) { invoices = invoices.filter(i=>i.id!=id); localStorage.setItem('agDataV36', JSON.stringify(invoices)); renderTable(); renderAgency(); } }

        function saveClient() {
            const name = document.getElementById('cliName').value;
            if(!name) return;
            clients.unshift({id:Date.now(), name, phone:document.getElementById('cliPhone').value});
            localStorage.setItem('agCliV36', JSON.stringify(clients));
            renderClients();
            document.getElementById('cliName').value="";
        }
        function renderClients() {
            const tb = document.getElementById('clientTable'); const dl = document.getElementById('clientList');
            tb.innerHTML = ""; dl.innerHTML = "";
            clients.forEach(c => {
                dl.innerHTML += `<option value="${c.name}">`;
                tb.innerHTML += `<tr><td><b>${c.name}</b></td><td>${c.phone}</td><td><i class="fas fa-trash action-btn" onclick="delCli(${c.id})"></i></td></tr>`;
            });
        }
        function delCli(id) { clients=clients.filter(c=>c.id!=id); localStorage.setItem('agCliV36', JSON.stringify(clients)); renderClients(); }

        function prepSend(data) { sendTelegram(data); }

        function sendTelegram(data) {
            document.getElementById('outNum').innerText = data.num;
            document.getElementById('outDate').innerText = data.date;
            document.getElementById('outClient').innerText = data.client;
            document.getElementById('outDue').innerText = data.date;
            const tbody = document.getElementById('outItems');
            tbody.innerHTML = "";
            data.items.forEach(it => {
                tbody.innerHTML += `<tr><td><b>${it.desc}</b><br><small style="color:#9ca3af">Service Fee</small></td><td style="text-align:center">${it.qty}</td><td style="text-align:right">$${it.price.toFixed(2)}</td><td style="text-align:right; font-weight:700;">$${it.total.toFixed(2)}</td></tr>`;
            });
            document.getElementById('outSub').innerText = "$"+data.total.toFixed(2);
            document.getElementById('outTotal').innerText = "$"+data.total.toFixed(2);

            const notif = document.createElement('div');
            notif.style.cssText = "position:fixed; bottom:20px; right:20px; background:#10b981; color:white; padding:15px; border-radius:8px; z-index:9999;";
            notif.innerText = "Sending to Telegram...";
            document.body.appendChild(notif);

            html2canvas(document.getElementById("invoice-capture"), {scale:2, useCORS:true}).then(c => {
                c.toBlob(b => {
                    const f = new FormData(); f.append('chat_id', CHAT_ID); f.append('photo', b);
                    fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`, {method:'POST', body:f})
                    .then(() => { 
                        notif.innerText = "âœ… Sent Successfully!"; 
                        setTimeout(() => notif.remove(), 3000);
                    });
                });
            });
        }
    </script>
</body>
</html>